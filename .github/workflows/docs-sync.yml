name: ë¬¸ì„œ ë™ê¸°í™” ê²€ì¦

on:
  pull_request:
    branches: [ main ]
    paths:
      - 'USER_CUSTOMIZATIONS.md'
      - 'PRD.md'
      - 'DOCUMENT_SYNC_STRATEGY.md'
  
  schedule:
    # ë§¤ì¼ ì˜¤ì „ 9ì‹œ (UTC)ì— ë¬¸ì„œ ë™ê¸°í™” ìƒíƒœ í™•ì¸
    - cron: '0 9 * * *'

  workflow_dispatch:
    # ìˆ˜ë™ ì‹¤í–‰ ê°€ëŠ¥

jobs:
  docs-sync:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout ì½”ë“œ
      uses: actions/checkout@v4
      
    - name: Node.js ì„¤ì •
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        cache: 'npm'
        
    - name: ì˜ì¡´ì„± ì„¤ì¹˜
      run: npm ci
      
    - name: ë¬¸ì„œ ë™ê¸°í™” ê²€ì¦
      run: npm run docs:verify
      
    - name: ë¬¸ì„œ ë¶ˆì¼ì¹˜ ë³´ê³ 
      if: failure()
      run: |
        echo "## ðŸ“‹ ë¬¸ì„œ ë™ê¸°í™” ì‹¤íŒ¨" >> $GITHUB_STEP_SUMMARY
        echo "ë¬¸ì„œ ê°„ ë¶ˆì¼ì¹˜ê°€ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤." >> $GITHUB_STEP_SUMMARY
        echo "ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ìˆ˜ë™ ë™ê¸°í™”ë¥¼ ìˆ˜í–‰í•˜ì„¸ìš”:" >> $GITHUB_STEP_SUMMARY
        echo "\`\`\`bash" >> $GITHUB_STEP_SUMMARY
        echo "npm run docs:sync" >> $GITHUB_STEP_SUMMARY
        echo "\`\`\`" >> $GITHUB_STEP_SUMMARY